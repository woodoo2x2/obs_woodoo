Значением пользовательской переменной может являться не только вычисляемое значение, но и результат выполнения запроса.
Результатом приведенного ниже запроса:

```sql
SET @min_price := (SELECT MIN(price)
                   FROM Books);
    
SELECT @min_price;
```

является: 

```no-highlight
+------------+
| @min_price |
+------------+
| 3.49       |
+------------+
```

В примере выше определяется переменная `@min_price`, которой в качестве значения присваивается минимальное значение поля `price` таблицы `Books`. Обратите внимание, что если при определении значения пользовательской переменной используется запрос, то он должен быть заключен в круглые скобки.

Запрос, определяющий значение пользовательской переменной всегда должен возвращать одиночное значение (одно поле и одна запись), в противном случае произойдет ошибка.

Результатом приведенного ниже запроса:

```sql
SET @min_price := (SELECT price
                   FROM Books);
    
SELECT @min_price;
```

является ошибка:

```no-highlight
ERROR 1242: Subquery returns more than 1 row
```

Определить пользовательскую переменную можно прямо внутри извлекающего запроса в блоке оператора `SELECT` без использования ключевого слова `SET`.

Результатом приведенного ниже запроса:

```sql
SELECT MIN(price) INTO @min_price
FROM Books;

SELECT @min_price;
```

является:

```no-highlight
+------------+
| @min_price |
+------------+
| 3.49       |
+------------+
```

Внутри одного блока `SELECT` можно определить как одну пользовательскую переменную, так и несколько.

Результатом приведенного ниже запроса:

```sql
SELECT MIN(price), MAX(price) INTO @min_price, @max_price
FROM Books;

SELECT @min_price, @max_price;
```

является:

```no-highlight
+------------+------------+
| @min_price | @max_price |
+------------+------------+
| 3.49       | 19.99      |
+------------+------------+
```

Обратите внимание на то, что при определении пользовательских переменных с помощью оператора `SELECT`, запрос всегда должен возвращать одну запись, в противном случае произойдет ошибка.

Результатом приведенного ниже запроса:

```sql
SELECT price INTO @min_price
FROM Books;

SELECT @min_price;
```

является ошибка:

```no-highlight
ERROR 1172: Result consisted of more than one row
```

#sql