Функция `SUBSTRING_INDEX()` используется для извлечения подстроки из строки с помощью разделителя. Она принимает три аргумента в следующем порядке:

- `str` — исходная строка
- `delimiter` — разделитель
- `count` — количество появлений разделителя

Функция возвращает подстроку, входящую в `str`, перед `count` появлением разделителя `delimiter`.

Результатом приведенного ниже запроса:

```
SELECT SUBSTRING_INDEX('g-e-e-k', '-', 1),
       SUBSTRING_INDEX('g-e-e-k', '-', 2),
       SUBSTRING_INDEX('g-e-e-k', '-', 3);
```

является:

```no-highlight
+------------------------------------+------------------------------------+------------------------------------+
| SUBSTRING_INDEX('g-e-e-k', '-', 1) | SUBSTRING_INDEX('g-e-e-k', '-', 2) | SUBSTRING_INDEX('g-e-e-k', '-', 3) |
+------------------------------------+------------------------------------+------------------------------------+
| g                                  | g-e                                | g-e-e                              |
+------------------------------------+------------------------------------+------------------------------------+
```

В примере выше рассматривается строка `g-e-e-k` с разделителем в виде символа `-`. Разделитель встречается в строке три раза. Подстрока, входящая в строку перед первым появлением разделителя, равна `g`, перед вторым появлением — `g-e`, перед третьим появлением — `g-e-e`.

Если указанное количество появлений разделителя больше количества раз, которое разделитель встречается в строке, функция `SUBSTRING_INDEX()` вернет всю строку.

Результатом приведенного ниже запроса:

```
SELECT SUBSTRING_INDEX('g-e-e-k', '-', 4),
       SUBSTRING_INDEX('g-e-e-k', '-', 10);
```

является:

```no-highlight
+------------------------------------+-------------------------------------+
| SUBSTRING_INDEX('g-e-e-k', '-', 4) | SUBSTRING_INDEX('g-e-e-k', '-', 10) |
+------------------------------------+-------------------------------------+
| g-e-e-k                            | g-e-e-k                             |
+------------------------------------+-------------------------------------+
```

Количество появлений разделителя может быть отрицательным числом, в таком случае извлечение подстроки происходит с конца.

Результатом приведенного ниже запроса:

```
SELECT SUBSTRING_INDEX('g-e-e-k', '-', -2),
       SUBSTRING_INDEX('g-e-e-k', '-', -3);
```

является:

```no-highlight
+-------------------------------------+-------------------------------------+
| SUBSTRING_INDEX('g-e-e-k', '-', -2) | SUBSTRING_INDEX('g-e-e-k', '-', -3) |
+-------------------------------------+-------------------------------------+
| e-k                                 | e-e-k                               |
+-------------------------------------+-------------------------------------+
```

Если разделителя в строке нет, функция `SUBSTRING_INDEX()` вернет строку в исходном виде.

Результатом приведенного ниже запроса:

```
SELECT SUBSTRING_INDEX('geek', '-', 1),
       SUBSTRING_INDEX('geek', '-', -1);
```

является:

```no-highlight
+---------------------------------+----------------------------------+
| SUBSTRING_INDEX('geek', '-', 1) | SUBSTRING_INDEX('geek', '-', -1) |
+---------------------------------+----------------------------------+
| geek                            | geek                             |
+---------------------------------+----------------------------------+
```

  Функция `SUBSTRING_INDEX()` выполняет поиск разделителя в строке с учетом регистра.