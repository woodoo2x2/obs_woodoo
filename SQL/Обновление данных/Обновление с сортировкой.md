Оператор `ORDER BY` может использоваться совместно с оператором `UPDATE` для определения порядка, в котором будут обновляться записи. На первый взгляд может показаться, что нам неважно, какие записи будут обновлены первыми, а какие последними, однако в некоторых ситуациях важно определить очередность их изменения.

Например, необходимость определения порядка обновления записей может возникнуть в случае изменения значений поля, являющегося первичным ключом. Известно, что значения первичного ключа должны быть уникальными, однако при их обновлении некоторые значения могут совпасть, что приведет к ошибке.

Результатом приведенного ниже запроса:

```sql
UPDATE Books
SET id = id + 1;
```

является ошибка:

```no-highlight
ERROR 1062: Duplicate entry '2' for key 'Books.PRIMARY'
```

В запросе выше мы пытаемся сдвинуть идентификаторы всех книг на одно значение вперед, однако в результате получаем ошибку. Так происходит по той причине, что обновление записей выполняется последовательно, начиная с первой. Поэтому после увеличения идентификатора первой книги на единицу, он становится равным `2`, результатом чего является то, что в таблице `Books` находятся две записи (первая и вторая), имеющие в качестве значения первичного ключа число `2`.

Чтобы избежать подобного поведения, можно воспользоваться оператором `ORDER BY` и выполнять обновление записей, начиная с последней.

После выполнения приведенного ниже запроса:

```sql
UPDATE Books
SET id = id + 1
ORDER BY id DESC;
```

таблица `Books` будет иметь вид:

```no-highlight
+----+------------------------+-----------+-------+--------+
| id | title                  | author_id | price | amount |
+----+------------------------+-----------+-------+--------+
| 2  | The Shining            | 1         | 7.99  | 1      |
| 3  | Fight Club             | 2         | 9.99  | 19     |
| 4  | The Catcher in the Rye | 3         | 3.49  | 11     |
| 5  | The Green Mile         | 1         | 15.99 | 6      |
| 6  | Haunted                | 2         | 13.99 | 1      |
+----+------------------------+-----------+-------+--------+
```

В данном запросе значения поля `id` обновляются в обратном порядке: сперва последняя запись изменяет значение с `5` на `6`, затем предпоследняя — с `4` на `5`, и так далее. В результате никакие два значения первичного ключа при обновлении не совпадают и запрос выполняется успешно.