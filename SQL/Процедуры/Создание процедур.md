

Общий шаблон для создания хранимой процедуры имеет следующий вид:

```sql
DELIMITER //
CREATE PROCEDURE <имя процедуры>(<1 параметр>, <2 параметр>, ...)
BEGIN
    <тело процедуры>;
END //
DELIMITER ;
```

Итак, создание процедуры начинается с ключевого слова `DELIMITER`, с помощью которого выполняется изменение разделителя на двойной слеш (`//`). Далее следует оператор `CREATE PROCEDURE`, после которого указывается имя процедуры. Затем в скобках через запятую выполняется определение каждого параметра процедуры.

Внутрь последующего блока `BEGIN END` помещается тело процедуры, которое и определяет ее поведение. Тело процедуры может включать вычисления на основе переданных аргументов, определения вспомогательных переменных, обращения к таблицам базы данных, условные конструкции `IF-ELSEIF-ELSE`, а также любые виды циклов. Завершается создание процедуры обновленным разделителем `//` и возвратом к стандартному разделителю в виде символа `;`.


При создании хранимой процедуры ее можно определить как детерминированную или недетерминированную, однако, в отличие от пользовательских функций, делать это необязательно.

Например, рассмотренная ранее процедура `HIGH_GRADE_STUDENTS()` может быть определена как недетерминированная следующим образом:

```sql
DELIMITER //
CREATE PROCEDURE HIGH_GRADE_STUDENTS()
NOT DETERMINISTIC
BEGIN
    SELECT *
    FROM Math
    WHERE grade >= 4;
END //
DELIMITER ;
```

Обратите внимание, что пояснять, почему процедура является недетерминированной, также необязательно.

Хранимую процедуру можно дополнить строкой документации. Для этого перед блоком `BEGIN END` необходимо указать ключевое слово `COMMENT`, а затем предоставить строку, содержащую краткое описание поведения процедуры.

Например, рассмотренная ранее процедура `HIGH_GRADE_STUDENTS()` может быть расширена кратким описанием следующим образом:

```sql
DELIMITER //
CREATE PROCEDURE HIGH_GRADE_STUDENTS()
COMMENT 'Процедура извлекает информацию о студентах, получивших оценку 4 или выше'
BEGIN
    SELECT *
    FROM Math
    WHERE grade >= 4;
END //
DELIMITER ;
```

 Хранимая процедура может быть удалена после создания. Для этого нужно воспользоваться оператором `DROP PROCEDURE`, а затем указать имя удаляемой процедуры.

Например, запрос, который удаляет хранимую процедуру `HIGH_GRADE_STUDENTS()`, выглядит следующим образом:

```sql
DROP PROCEDURE HIGH_GRADE_STUDENTS;
```

Хранимые процедуры нечувствительны к регистру, поэтому, например, процедуру с именем `HIGH_GRADE_STUDENTS` можно вызвать как с использованием имени `HIGH_GRADE_STUDENTS`, так и `high_grade_students` или `High_Grade_Students`.

 Результатом приведенного ниже запроса:

```sql
DELIMITER //
CREATE PROCEDURE HIGH_GRADE_STUDENTS()
BEGIN
    SELECT *
    FROM Math
    WHERE grade >= 4;
END //
DELIMITER ;

CALL high_grade_students;
```

является:

```no-highlight
+----+--------+---------+-------+
| id | name   | surname | grade |
+----+--------+---------+-------+
| 2  | Peter  | Parker  | 5     |
| 4  | Gwen   | Stacy   | 4     |
| 5  | Harry  | Osborn  | 5     |
| 7  | Miles  | Morales | 5     |
| 9  | Curtis | Connors | 4     |
+----+--------+---------+-------+
```