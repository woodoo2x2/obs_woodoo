

После оператора `WHERE` может содержаться любое количество логических операторов `AND` и `OR`. Комбинируя их, можно создавать сложные фильтры. Однако при комбинировании операторов `AND` и `OR` возникает одна проблема. Для ее понимания рассмотрим запрос, который, как кажется на первый взгляд, извлекает данные о песнях, исполнителями которых являются `The Sounds` или `Kate Bush` и количество прослушиваний которых превышает `50000`.

Результатом приведенного ниже запроса:

```sql
SELECT trackname, artist, streams
FROM Songs
WHERE artist = 'The Sounds' OR artist = 'Kate Bush' AND streams > 50000;
```

является:

```no-highlight
+----------------------+------------+---------+
| trackname            | artist     | streams |
+----------------------+------------+---------+
| My Lover             | The Sounds | 99488   |
| Running up That Hill | Kate Bush  | 121495  |
| Thrill               | The Sounds | 49345   |
+----------------------+------------+---------+
```

Как видно по результирующей таблице, записи были отфильтрованы не так, как нужно, так как количество прослушиваний последней песни в результирующей таблице не превышает `50000`. Произошло это потому, что сперва обрабатывается логический оператор `AND`, а потом уже — логический оператор `OR`. Таким образом, приведенный выше запрос извлекает песни, исполненные `Kate Bush` , количество прослушиваний которых превышает `50000`, и песни, исполненные `The Sounds`, независимо от количества их прослушиваний.

Чтобы составить корректный запрос, необходимо воспользоваться скобками и точно сгруппировать необходимые условия. В нашем случае в скобки нужно заключить часть условия с оператором `OR`, чтобы она имела больший приоритет и выполнялась первой. 

Результатом приведенного ниже запроса:

```sql
SELECT trackname, artist, streams
FROM Songs
WHERE (artist = 'The Sounds' OR artist = 'Kate Bush') AND streams > 50000;
```

является:

```no-highlight
+----------------------+------------+---------+
| trackname            | artist     | streams |
+----------------------+------------+---------+
| My Lover             | The Sounds | 99488   |
| Running up That Hill | Kate Bush  | 121495  |
+----------------------+------------+---------+
```

Теперь при извлечении записи сперва проверяется, что в поле `artist` содержится значение `The Sounds` или `Kate Bush`, а затем выполняется проверка того, что значение поля `streams` больше `50000`. Если обе проверки успешны, то запись извлекается, в противном случае отбрасывается.

При использовании логических операторов `AND` и `OR` рекомендуется всегда ставить скобки, чтобы точно сгруппировать условия. Не стоит полагаться на порядок обработки по умолчанию, даже если он подразумевает необходимый результат.