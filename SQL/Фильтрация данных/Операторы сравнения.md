## 

Условие после оператора `WHERE` может являться не только проверкой на равенство. В SQL поддерживается целый набор операторов сравнения, которые перечислены в таблице ниже:

|   |   |
|---|---|
|**Оператор**|**Проверка**|
|`=`|Равенство|
|`<=>`|Эквивалентность|
|`!=` или `<>`|Неравенство|
|`<`|Меньше|
|`<=`|Меньше или равно|
|`>`|Больше|
|`>=`|Больше или равно|
|`BETWEEN`|Вхождение в диапазон|
|`IS NULL`|Значение `NULL`|
|`IS NOT NULL`|Не значение `NULL`|

Мы уже рассмотрели пример проверки на равенство. Теперь попробуем воспользоваться и другими операторами сравнения.

### Сравнение с одиночным значением

**Пример 1.** Извлечем из таблицы `Songs` данные о песнях, количество прослушиваний которых превышает `100000`.

Результатом приведенного ниже запроса:

```sql
SELECT trackname, artist, streams
FROM Songs
WHERE streams > 100000;
```

является:

```no-highlight
+----------------------+-----------+---------+
| trackname            | artist    | streams |
+----------------------+-----------+---------+
| Running up That Hill | Kate Bush | 121495  |
| Spent the Day in Bed | Morrissey | 174994  |
+----------------------+-----------+---------+
```

**Пример 2.** Извлечем из таблицы `Songs` данные о песнях, которые входят в тройку лучших композиций, и отсортируем их по занимаемой позиции.

Результатом приведенного ниже запроса:

```sql
SELECT place, trackname, artist
FROM Songs
WHERE place <= 3
ORDER BY place;
```

является:

```no-highlight
+----------+----------------------+------------+
| place    | trackname            | artist     |
+----------+----------------------+------------+
| 1        | Spent the Day in Bed | Morrissey  |
| 2        | Running up That Hill | Kate Bush  |
| 3        | My Lover             | The Sounds |
+----------+----------------------+------------+
```

**Пример 3.** Извлечем из таблицы `Songs` данные о песнях, которые не принадлежат группе `The Sounds`.

Результатом приведенного ниже запроса:

```sql
SELECT trackname, artist
FROM Songs
WHERE artist != 'The Sounds';
```

является:

```no-highlight
+----------------------+-----------+
| trackname            | artist    |
+----------------------+-----------+
| Crazy on You         | Heart     |
| Running up That Hill | Kate Bush |
| Spent the Day in Bed | Morrissey |
+----------------------+-----------+
```

 Операторы `!=` и `<>` обычно взаимозаменяемы, однако не во всех СУБД поддерживаются обе формы оператора.

### Сравнение с диапазоном значений

Для сравнения с диапазоном значений используется оператор `BETWEEN`. Его синтаксис немного отличается от других операторов, так как для него требуются два значения: начальное и конечное.

**Пример 1.** Извлечем из таблицы `Songs` данные о песнях, количество прослушиваний которых находится в диапазоне `[50000; 100000]`.

Результатом приведенного ниже запроса:

```sql
SELECT trackname, artist, streams
FROM Songs
WHERE streams BETWEEN 50000 AND 100000;
```

является:

```no-highlight
+--------------+------------+---------+
| trackname    | artist     | streams |
+--------------+------------+---------+
| Crazy on You | Heart      | 76338   |
| My Lover     | The Sounds | 99488   |
+--------------+------------+---------+
```

Как видно из примера выше, при использовании оператора `BETWEEN` нужно указывать два значения: нижнюю и верхнюю границы диапазона. Оба значения должны быть разделены ключевым словом `AND`. При этом извлекаются все значения из диапазона, включая те, что равны граничным значениям.

**Пример 2.** Извлечем из таблицы `Songs` данные о песнях, которые занимают второе, третье и четвертое места, и отсортируем их по занимаемой позиции.

Результатом приведенного ниже запроса:

```sql
SELECT place, trackname, artist
FROM Songs
WHERE place BETWEEN 2 AND 4
ORDER BY place;
```

является:

```no-highlight
+----------+----------------------+------------+
| place    | trackname            | artist     |
+----------+----------------------+------------+
| 2        | Running up That Hill | Kate Bush  |
| 3        | My Lover             | The Sounds |
| 4        | Crazy on You         | Heart      |
+----------+----------------------+------------+
```

### Проверка на присутствие и отсутствие значения

Чтобы проверить, содержит ли поле значение `NULL`, нельзя просто записать `<название поля> = NULL`, поскольку значение `NULL` трактуется как неопределенное, и мы не можем выполнить проверку такого значения ни на равенство, ни на неравенство.

Для определения того, находится ли в поле значение `NULL`, предусмотрен оператор `IS NULL`. Противоположным для него оператором является `IS NOT NULL`, который позволяет определить, что в поле не находится значение `NULL`.

**Пример 1.** Извлечем из таблицы `Songs` данные о песнях, которые не имеют даты выхода.

Результатом приведенного ниже запроса:

```sql
SELECT trackname, artist, release_date
FROM Songs
WHERE release_date IS NULL;
```

является:

```no-highlight
+--------------+------------+--------------+
| trackname    | artist     | release_date |
+--------------+------------+--------------+
| Crazy on You | Heart      | NULL         |
| My Lover     | The Sounds | NULL         |
+--------------+------------+--------------+
```

**Пример 2.** Извлечем из таблицы `Songs` данные о песнях, которые имеют дату выхода, и отсортируем их по этой дате в порядке убывания.

Результатом приведенного ниже запроса:

```sql
SELECT trackname, artist, release_date
FROM Songs
WHERE release_date IS NOT NULL
ORDER BY release_date DESC;
```

является:

```no-highlight
+----------------------+------------+--------------+
| trackname            | artist     | release_date |
+----------------------+------------+--------------+
| Spent the Day in Bed | Morrissey  | 2017-09-19   |
| Thrill               | The Sounds | 2016-11-10   |
| Running up That Hill | Kate Bush  | 1985-08-05   |
+----------------------+------------+--------------+
```

**.** В зависимости от оператора и сравниваемых значений результатом операции сравнения могут являться следующие значения:

- `1`, что эквивалентно истине
- `0`, что эквивалентно лжи
- `NULL`, что эквивалентно неопределенности

Результатом приведенного ниже запроса:

```sql
SELECT 'x' = 'x',
       'x' <=> 'x',
       'x' <=> 'y',
       'x' != 'z',
       5 < 10,
       10 <= 10,
       5 > 10,
       10 >= 5;
```

является:

```no-highlight
+-----------+-------------+-------------+------------+--------+----------+--------+---------+
| 'x' = 'x' | 'x' <=> 'x' | 'x' <=> 'y' | 'x' != 'z' | 5 < 10 | 10 <= 10 | 5 > 10 | 10 >= 5 |
+-----------+-------------+-------------+------------+--------+----------+--------+---------+
| 1         | 1           | 0           | 1          | 1      | 1        | 0      | 1       |
+-----------+-------------+-------------+------------+--------+----------+--------+---------+
```

Отдельного рассмотрения требует значение `NULL`. Дело в том, что результатом сравнения любого значения с `NULL` является `NULL`.

Результатом приведенного ниже запроса:

```sql
SELECT 'x' != NULL,
       10 > NULL,
       NULL = NULL;
```

является:

```no-highlight
+-------------+-----------+-------------+
| 'x' != NULL | 10 > NULL | NULL = NULL |
+-------------+-----------+-------------+
| NULL        | NULL      | NULL        |
+-------------+-----------+-------------+
```

Исключением является оператор эквивалентности, который аналогичен оператору равенства лишь с той разницей, что результат будет равен `1` в случае сравнения `NULL` с `NULL` и `0`, когда идет сравнение любого отличного от `NULL` значения с `NULL`.

Результатом приведенного ниже запроса:

```sql
SELECT 'x' <=> NULL,
       '5' <=> NULL,
       NULL <=> NULL;
```

является:

```no-highlight
+--------------+--------------+---------------+
| 'x' <=> NULL | '5' <=> NULL | NULL <=> NULL |
+--------------+--------------+---------------+
| 0            | 0            | 1             |
+--------------+--------------+---------------+
```

По умолчанию операторы сравнения не учитывают регистр при сравнении строковых значений.

Результатом приведенного ниже запроса:

```sql
SELECT 'bee' = 'Bee',
       'bee' <=> 'Bee',
       'bee' > 'Bee',
       'bee' < 'Bee';
```

является:

```no-highlight
+---------------+-----------------+---------------+---------------+
| 'bee' = 'Bee' | 'bee' <=> 'Bee' | 'bee' > 'Bee' | 'bee' < 'Bee' |
+---------------+-----------------+---------------+---------------+
| 1             | 1               | 0             | 0             |
+---------------+-----------------+---------------+---------------+
```

Для учета регистра необходимо использовать ключевое слово `BINARY`, которое располагается перед левым операндом.

Результатом приведенного ниже запроса:

```sql
SELECT BINARY 'bee' = 'Bee',
       BINARY 'bee' <=> 'Bee',
       BINARY 'bee' > 'Bee',
       BINARY 'bee' < 'Bee';
```

является:

```no-highlight
+----------------------+------------------------+----------------------+----------------------+
| BINARY 'bee' = 'Bee' | BINARY 'bee' <=> 'Bee' | BINARY 'bee' > 'Bee' | BINARY 'bee' < 'Bee' |
+----------------------+------------------------+----------------------+----------------------+
| 0                    | 0                      | 1                    | 0                    |
+----------------------+------------------------+----------------------+----------------------+
```


Логические операторы `AND, OR, NOT, IN` и `NOT IN` имеют разный приоритет. В таблице ниже они представлены в порядке уменьшения их приоритета:

|   |
|---|
|**Оператор**|
|`IN , NOT IN`|
|`NOT`|
|`AND`|
|`OR`|