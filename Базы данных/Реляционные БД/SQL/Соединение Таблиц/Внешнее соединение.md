**Первая таблица.** Информация об авторах книг располагается в таблице `Authors`, которая имеет следующий вид:

```no-highlight
+----+-----------------+
| id | author          |
+----+-----------------+
| 1  | Leo Tolstoy     |
| 2  | Chuck Palahniuk |
| 3  | Stephen King    |
| 4  | John Tolkien    |
| 5  | Joanne Rowling  |
+----+-----------------+
```

Первое поле этой таблицы содержит идентификатор автора, второе — имя и фамилию.

**Вторая таблица.** Информация о размещенных в библиотеке книгах располагается в таблице `Books`, которая имеет следующий вид:

```no-highlight
+----+-----------+-----------------------+
| id | author_id | title                 |
+----+-----------+-----------------------+
| 1  | NULL      | Old Gods of Asgard    |
| 2  | 1         | Fight Club            |
| 3  | 2         | The Green Mile        |
| 4  | 3         | The Lord of the Rings |
| 5  | 2         | It                    |
| 6  | 1         | Haunted               |
| 7  | 2         | The Shining           |
| 8  | NULL      | Friendly Neighborhood |
| 9  | 2         | Pet Sematary          |
| 10 | NULL      | Homesick              |
+----+-----------+-----------------------+
```

Первое поле этой таблицы содержит идентификатор книги, второе — идентификатор автора, третье — название книги. Если автор книги неизвестен, значением поля `author_id` является `NULL`.

Схема базы данных

При внутреннем соединении двух таблиц отбираются только те пары записей, для которых выполняется условие соединения. Данное поведение безусловно удобно, однако не всегда нужно, поскольку нередки ситуации, когда записи, для которых невозможно подобрать пару, также должны быть отобраны.

Например, в таблице `Books` содержится информация о книгах и их авторах, но у части книг автор считается неизвестным. Если мы выполним внутреннее соединение таблиц `Books` и `Authors` с целью извлечь названия всех книг с указанием авторства каждой, то потеряем те книги, авторство которых неизвестно.

Результатом приведенного ниже запроса:

```
SELECT title, author
FROM Books INNER JOIN Authors ON Books.author_id = Authors.id;
```

является: 

```no-highlight
+-----------------------+-----------------+
| title                 | author          |
+-----------------------+-----------------+
| Fight Club            | Leo Tolstoy     |
| The Green Mile        | Chuck Palahniuk |
| The Lord of the Rings | Stephen King    |
| It                    | Chuck Palahniuk |
| Haunted               | Leo Tolstoy     |
| The Shining           | Chuck Palahniuk |
| Pet Sematary          | Chuck Palahniuk |
+-----------------------+-----------------+
```

Как видно из результата, книги `Old Gods of Asgard, Friendly Neighborhood` и `Homesick` не были учтены. Для того чтобы результат соединения включал информацию обо всех книгах, независимо от того, известен ли автор, необходимо воспользоваться другим видом соединения — **внешним**.

Внешнее соединение бывает двух видов: **левое** и **правое**. При **левом внешнем соединении** двух таблиц отбираются все пары записей, для которых выполняется условие соединения, а также все оставшиеся записи из **левой** таблицы, для которых пара не нашлась.

Например, результатом левого внешнего соединения таблиц `Books` и `Authors` с условием `Books.author_id = Authors.id` является следующая таблица:

```no-highlight
+----+-----------+-----------------------+------+-----------------+
| id | author_id | title                 | id   | author          |
+----+-----------+-----------------------+------+-----------------+
| 1  | NULL      | Old Gods of Asgard    | NULL | NULL            |
| 2  | 1         | Fight Club            | 1    | Leo Tolstoy     |
| 3  | 2         | The Green Mile        | 2    | Chuck Palahniuk |
| 4  | 3         | The Lord of the Rings | 3    | Stephen King    |
| 5  | 2         | It                    | 2    | Chuck Palahniuk |
| 6  | 1         | Haunted               | 1    | Leo Tolstoy     |
| 7  | 2         | The Shining           | 2    | Chuck Palahniuk |
| 8  | NULL      | Friendly Neighborhood | NULL | NULL            |
| 9  | 2         | Pet Sematary          | 2    | Chuck Palahniuk |
| 10 | NULL      | Homesick              | NULL | NULL            |
+----+-----------+-----------------------+------+-----------------+
```

Данная таблица включает все пары записей из таблиц `Books` и `Authors`, для которых выполняется условие соединения, а также все оставшиеся записи из таблицы `Books`, для которых нет соответствующей записи в таблице `Authors`.

При внешнем соединении записям без пары в соответствие ставятся значения `NULL`.

При **правом внешнем соединении** двух таблиц отбираются все пары записей, для которых выполняется условие соединения, а также все оставшиеся записи из **правой** таблицы, для которых пара не нашлась.

Например, результатом правого внешнего соединения таблиц `Books` и `Authors` с условием `Books.author_id = Authors.id` является следующая таблица:

```no-highlight
+------+-----------+-----------------------+----+-----------------+
| id   | author_id | title                 | id | author          |
+------+-----------+-----------------------+----+-----------------+
| 6    | 1         | Haunted               | 1  | Leo Tolstoy     |
| 2    | 1         | Fight Club            | 1  | Leo Tolstoy     |
| 9    | 2         | Pet Sematary          | 2  | Chuck Palahniuk |
| 7    | 2         | The Shining           | 2  | Chuck Palahniuk |
| 5    | 2         | It                    | 2  | Chuck Palahniuk |
| 3    | 2         | The Green Mile        | 2  | Chuck Palahniuk |
| 4    | 3         | The Lord of the Rings | 3  | Stephen King    |
| NULL | NULL      | NULL                  | 4  | John Tolkien    |
| NULL | NULL      | NULL                  | 5  | Joanne Rowling  |
+------+-----------+-----------------------+----+-----------------+
```

Данная таблица включает все пары записей из таблиц `Books` и `Authors`, для которых выполняется условие соединения, а также все оставшиеся записи из таблицы `Authors`, для которых нет соответствующей записи в таблице `Books`.

Внешнее соединение отличается от внутреннего лишь тем, что дополнительно отбирает оставшиеся без пары записи из левой или правой таблицы, ставя им в соответствие значения `NULL`.

[[Оператор LEFT OUTER JOIN|Левое]] и [[Оператор RIGHT OUTER JOIN|правое]] внешние соединения являются взаимозаменяемыми. Например, левое внешнее соединение таблиц `Books` и `Authors` равнозначно правому внешнему соединению таблиц `Authors` и `Books`.

При использовании оператора `LEFT OUTER JOIN` ключевое слово `OUTER` (в переводе на русский "внешний") является опциональным и может быть опущено.

Например, приведенные ниже запросы функционально полностью идентичны:

```
    SELECT *
    FROM Books LEFT OUTER JOIN Authors ON Books.author_id = Authors.id;
    ```
    
 ```
    SELECT *
    FROM Books LEFT JOIN Authors ON Books.author_id = Authors.id;
    ```
Виды соединений допустимо комбинировать. Например, при соединении трех таблиц, между первыми двумя таблицами можно выполнить [[Внутреннее соединение таблиц|внутреннее соединение]], между полученным результатом и третьей таблицей — внешнее.

Если при использовании соединений необходимо извлечь значения всех полей одной из соединяемых таблиц, можно использовать символ `*`, указав его после имени этой таблицы.

Результатом приведенного ниже запроса:

```sql
SELECT Books.*, author
FROM Books
LEFT JOIN Authors ON author_id = Authors.id
```

является:

```no-highlight
+----+-----------+-----------------------+-----------------+
| id | author_id | title                 | author          |
+----+-----------+-----------------------+-----------------+
| 1  | NULL      | Old Gods of Asgard    | NULL            |
| 2  | 1         | Fight Club            | Leo Tolstoy     |
| 3  | 2         | The Green Mile        | Chuck Palahniuk |
| 4  | 3         | The Lord of the Rings | Stephen King    |
| 5  | 2         | It                    | Chuck Palahniuk |
| 6  | 1         | Haunted               | Leo Tolstoy     |
| 7  | 2         | The Shining           | Chuck Palahniuk |
| 8  | NULL      | Friendly Neighborhood | NULL            |
| 9  | 2         | Pet Sematary          | Chuck Palahniuk |
| 10 | NULL      | Homesick              | NULL            |
+----+-----------+-----------------------+-----------------+
```