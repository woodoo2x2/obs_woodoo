Создание пользовательской переменной и присвоение ей значения выполняется с помощью операторов `SET` и `:=`. Сначала следует оператор `SET`, а затем между оператором `:=` указываются имя переменной и ее значение.

В результате выполнения приведенного ниже запроса:

```sql
SET @variable := 1;
```

будет создана пользовательская переменная с именем `variable` и значением `1`.

Обратите внимание, что перед именем пользовательской переменной располагается знак `@`. Его необходимо использовать при создании любой пользовательской переменной и при каждом обращении к ней, поскольку он подсказывает СУБД о том, что следующее за знаком `@` имя следует расценивать исключительно как имя пользовательской переменной, а не поля, таблицы или какого-либо другого объекта.

Имя пользовательской переменной может включать буквенно-цифровые символы, точку (`.`), нижнее подчеркивание (`_`) и знак доллара (`$`). Максимальное количество символов в имени переменной равняется `64`.

Чтобы воспользоваться пользовательской переменной после ее определения достаточно обратиться к ней по ее имени.

Результатом приведенного ниже запроса:

```sql
SET @variable := 1;
    
SELECT @variable;
```

является:

```no-highlight
+-----------+
| @variable |
+-----------+
| 1         |
+-----------+
```

Значением пользовательской переменной необязательно должно быть явно определенное значение, это может быть результат некоторого вычисления или возвращаемое значение функции.

Результатом приведенного ниже запроса:

```sql
SET @variable := SQRT(2);
    
SELECT @variable;
```

является:

```no-highlight
+--------------------+
| @variable          |
+--------------------+
| 1.4142135623730951 |
+--------------------+
```

Пользовательские переменные нечувствительны к регистру, поэтому, например, к переменной с именем `variable` можно обратиться как с использованием имени `variable`, так и `Variable` или `VARIABLE`. 

Результатом приведенного ниже запроса:

```sql
SET @variable := 1;
    
SELECT @variable, @Variable, @VARIABLE;
```

является:

```no-highlight
+-----------+-----------+-----------+
| @variable | @Variable | @VARIABLE |
+-----------+-----------+-----------+
| 1         | 1         | 1         |
+-----------+-----------+-----------+
```

Внутри одного блока `SET` можно определить как одну пользовательскую переменную, так и несколько. Во втором случае достаточно перечислить определение каждой переменной через запятую.

В результате выполнения приведенного ниже запроса:

```sql
SET @variable1 := 1,
    @variable2 := 2;
```

будут созданы пользовательские переменные с именами `variable1` и `variable2` и значениями `1` и `2` соответственно.

Пользовательские переменные могут участвовать в математических выражениях, операциях сравнения, передаваться функциям в качестве аргументов и использоваться в контексте запроса как любые другие значения.

Результатом приведенного ниже запроса:

```sql
SET @min_price := 7.99,
    @max_price := 9.99;
    
SELECT title, price
FROM Books
WHERE price BETWEEN @min_price AND @max_price;
```

является:

```no-highlight
+------------------------------------------+-------+
| title                                    | price |
+------------------------------------------+-------+
| The Shining                              | 7.99  |
| Fight Club                               | 9.99  |
| The Great Gatsby                         | 7.99  |
| Harry Potter and the Prisoner of Azkaban | 9.99  |
+------------------------------------------+-------+
```

Запрос выше извлекает данные о тех книгах, цена которых заключена между `7.99` и `9.99` долларами, при этом левая граница цены определяется переменной `@min_price`, а правая — `@max_price`. В данном случае использование пользовательских переменных удобно тем, что при необходимости изменить правую или левую границу цены будет достаточно изменить значение соответствующей переменной, не изменяя при этом сам извлекающий запрос.

Попытка определить пользовательскую переменную, имя которой совпадает с именем существующей переменной, приведет к переопределению переменной, а не к ошибке.

Результатом приведенного ниже запроса:

```sql
SET @variable := 1;
SET @variable := 2;

SELECT @variable;
```

является:

```no-highlight
+-----------+
| @variable |
+-----------+
| 2         |
+-----------+
```

Пользовательские переменные нельзя использовать в блоке оператора `LIMIT` для ограничения количества извлекаемых записей.

Результатом приведенного ниже запроса:

```sql
SET @limitvalue := 5;

SELECT *
FROM Books
LIMIT @limitvalue;
```

является ошибка:

```no-highlight
ERROR 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@limitvalue' at line 3
```


Пользовательская переменная, определенная одним пользователем, не видна другим пользователям. Другими словами, пользовательская переменная является специфичной для сессии.

При определении пользовательской переменной с помощью ключевого слова `SET` допустимо использовать оператор `=`.

В результате выполнения приведенного ниже запроса:

```sql
SET @variable = 1;
```

будет создана пользовательская переменная с именем `variable` и значением `1`.
#sql