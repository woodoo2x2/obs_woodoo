

Любой объект в Python можно проверить на истинность и привести к логическому типу с помощью [[Функция bool()]].

Приведенный ниже код:

```python
obj1 = 10
obj2 = []

print(bool(obj1))
print(bool(obj2))

print('bee' if obj1 else 'geek')
print('bee' if obj2 else 'geek')
```

выводит:

```no-highlight
True
False
bee
geek
```

Мы уже знакомы с тем, как приводятся к логическому типу экземпляры встроенных классов. Например, любое ненулевое число или любой непустой список преобразуются в значение `True`. Однако если мы попытаемся привести к логическому типу экземпляры собственных классов, то заметим, что все они без исключения преобразуются в значение `True`.

Рассмотрим класс `Angle`, описывающий угол от −180° до 180°, и приведем его экземпляры к логическому типу.

Приведенный ниже код:

```python
class Angle:
    def __init__(self, value):
        self.value = value                      # градусная мера угла


print(bool(Angle(-110)))
print(bool(Angle(0)))
print(bool(Angle(0.0)))
print(bool(Angle(120.1)))
```

выводит:

```no-highlight
True
True
True
True
```

За приведение экземпляра класса к логическому типу и его поведение при передаче в функцию `bool()` отвечает магический метод `__bool__()`. Реализовав данный метод в классе, мы можем определить, какие экземпляры считаем истинными, а какие ложными.

Реализуем в классе `Angle` магический метод `__bool__()`. Будем считать экземпляр класса истинным, если он представляет ненулевой угол, в противном случае будем считать его ложным.

Приведенный ниже код:

```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __bool__(self):
        return self.value != 0


print(bool(Angle(-110)))
print(bool(Angle(0)))
print(bool(Angle(0.0)))
print(bool(Angle(120.1)))
```

выводит:

```no-highlight
True
False
False
True
```

Помимо магического метода `__bool__()`, за приведение объекта к логическому типу и его поведение при передаче в функцию `bool()` может отвечать и [[Магический метод __len__()]], о котором мы будем говорить чуть позже в модуле Протоколы. Если в классе не реализован метод `__bool__()`, то происходит попытка вызова метода `__len__()`, и если он реализован и возвращает ненулевое значение, то объект считается истинным, в противном случае объект считается ложным.

Приведенный ниже код:

```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __len__(self):
        print('Вызов метода __len__()')
        return self.value != 0


print(bool(Angle(-110)))
print(bool(Angle(0)))
print(bool(Angle(120.1)))
```

выводит:

```no-highlight
Вызов метода __len__()
True
Вызов метода __len__()
False
Вызов метода __len__()
True
```

Если в классе отсутствуют оба магических метода `__bool__()` и `__len__()`, то все экземпляры этого класса считаются истинными. Если же в классе присутствуют оба данных метода, то для всех логических приведений будет использоваться именно метод `__bool__()`.

Вызов магического метода `__bool__()` (в определенных случаях `__len__()`) происходит во время любых логических приведений. Например, при проверке на истинность с помощью условного оператора `if`.

Приведенный ниже код:

```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __bool__(self):
        print('Вызов метода __bool__()')
        return bool(self.value)


angle = Angle(100)

if angle:
    print('I am True')
else:
    print('I am False')
```

выводит:

```no-highlight
Вызов метода __bool__()
I am True
```

Встроенные функции [[Функция all()]] и [[Функция any()]] так же приводят к вызову метода `__bool__()` (в определенных случаях `__len__()`), поэтому реализовав в классе приведение к логическому типу, мы можем полноценно пользоваться данными функциями, передавая им в качестве аргументов экземпляры собственных классов.

Приведенный ниже код:

```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __bool__(self):
        print('Вызов метода __bool__()')
        return bool(self.value)


angles = [Angle(100), Angle(110), Angle(-50), Angle(0)]

print(all(angles))
print()
print(any(angles))
```

выводит:

```no-highlight
Вызов метода __bool__()
Вызов метода __bool__()
Вызов метода __bool__()
Вызов метода __bool__()
False

Вызов метода __bool__()
True
```

Если методы [[Магические методы __int__(), __float__() и __complex__()]] не определены, соответствующие функции будут обращаться к методу [[Магический метод __index__()]], который указывает на то, что объект имеет целочисленный тип. Этот метод должен возвращать целое число, которое и будет передаваться в эти функции. Наличие этого метода у класса так же позволяет применять к экземпляру этого класса функции преобразования в другую систему счисления, такие как [[Функция bin()]], [[Функция oct()]] и [[Функция hex()]].

Приведенный ниже код:

```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __index__(self):
        print('Вызов метода __index__()')
        return self.value


angle = Angle(100)

print(int(angle))
print(float(angle))
print(bin(angle))
print(oct(angle))
print(hex(angle))
```

выводит:

```no-highlight
Вызов метода __index__()
100
Вызов метода __index__()
100.0
Вызов метода __index__()
0b1100100
Вызов метода __index__()
0o144
Вызов метода __index__()
0x64
```