# Старт сессии

Создание экземпляра класса для приложения на pyrogram.

```
api_id = "your_api_id"
api_hash = "your_api_hash"
app = Client("my_session", api_id=api_id, api_hash=api_hash)
```

### `app.start()`

Метод `app**.start()**` инициализирует клиент и устанавливает соединение с серверами Telegram. Это необходимо сделать перед тем, как начать использовать другие методы Pyrogram для взаимодействия. Во время выполнения `app**.start()**`, Pyrogram выполняет ряд важных задач, таких как аутентификация, получение необходимых конфигураций и установка соединения.

### `app.stop()`

Метод `app**.stop()**` завершает работу клиента и отключает его от серверов Telegram. Это важный шаг для освобождения ресурсов и предотвращения утечек памяти. После вызова `app**.stop()**` клиент больше не будет обрабатывать входящие обновления и не сможет отправлять запросы к Telegram API.

```
def main():
    app.start()
    print("Клиент запущен")
    
    # Теперь вы можете вызывать методы Pyrogram
    me = app.get_me()
    print(me)
    
    app.stop()
    print("Клиент остановлен")

main()
```

### Использование `**with app:**`

Pyrogram поддерживает контекстный менеджер, что позволяет использовать конструкцию `with` для автоматического управления жизненным циклом клиента. Когда вы входите в блок `with`, Pyrogram автоматически запускает клиент, а при выходе из блока — останавливает его. Это упрощает управление ресурсами и гарантирует, что все необходимые шаги для инициализации и завершения работы будут выполнены корректно.

```
def main():
    with app:
        print("Клиент запущен")
        
        # Теперь вы можете вызывать методы Pyrogram
        me = app.get_me()
        print(me)
        
    print("Клиент остановлен")
```

В этом примере `app**.start()**` вызывается автоматически при входе в блок `with`, а `app**.stop()**` — при выходе из него. Это обеспечивает более чистый и безопасный код, поскольку уменьшает риск забыть остановить клиент и освободить ресурсы.