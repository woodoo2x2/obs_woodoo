

В Python все функции возвращают значение. Даже если тело функции не содержит явно инструкции `return`, она вернет значение `None`. Нужно быть очень внимательным к декорированию функций, которые возвращают значения, которые затем используются.

Допустим, мы написали следующий декоратор:

```python
def talk(func):
    def wrapper(*args, **kwargs):
        dash = '-' * 15
        print(dash)
        func(*args, **kwargs)           # вызываем декорируемую функцию
        print(dash)

    return wrapper
```

И мы хотим декорировать простую функцию, которая возвращает значение:

```python
@talk
def greet(name):
    return f'Hello {name}!'
```

Приведенный ниже код:

```python
print(greet('Timur'))
```

выводит:

```no-highlight
---------------
---------------
None
```

Декоратор съел возвращаемое значение из функции `greet()`, так как вложенная функция `wrapper()` явно не возвращает какого либо значения, и в итоге вызов декорируемой функции `greet('Timur')` в примере выше вернул значение `None`.

Чтобы исправить этот недочет, необходимо сделать так, чтобы вложенная функция `wrapper()` возвращала задекорированное значение, которое, в свою очередь, возвращает функция. Изменим декоратор `talk()` следующим образом:

```python
def talk(func):
    def wrapper(*args, **kwargs):
        dash = '-' * 15
        result = func(*args, **kwargs)
        return dash + '\n' + result + '\n' + dash

    return wrapper
```

Приведенный ниже код:

```python
@talk
def greet(name):
    return f'Hello {name}!'

print(greet('Timur'))
```

выводит:

```no-highlight
---------------
Hello Timur!
---------------
```

Теперь декоратор работает так, как и ожидалось.