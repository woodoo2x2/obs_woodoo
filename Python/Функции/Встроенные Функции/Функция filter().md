

Другая популярная задача при работе со списками: отобрать часть элементов списка по определенному критерию. Функция высшего порядка для решения такой задачи называется `filter()`.

  Функция-критерий, которая возвращает значение `True` или `False`, называется предикатом.

Реализация такой функции может выглядеть так:

```python
def filter(function, items):
    result = []
    for item in items:
        if function(item):        
            result.append(item)  # добавляем элемент item если функция function вернула значение True

    return result
```

Наша функция `filter()` применяет предикат `function` к каждому элементу и добавляет в итоговый список только те элементы, для которых предикат вернул `True`.

Например, чтобы из исходного списка чисел получить список с элементами, большими 1010, можно написать такой код:

```python
def is_greater10(num):  # функция возвращает значение True если число больше 10 и False в противном случае
    return num > 10


numbers = [12, 2, -30, 48, 51, -60, 19, 10, 13]

large_numbers = filter(is_greater10, numbers)  #  список large_numbers содержит элементы, большие 10

print(large_numbers)
```

При условии, что функция `filter()` определена, как указано выше, этот код выводит:

```no-highlight
[12, 48, 51, 19, 13]
```

Рассмотрим еще пару примеров применения реализованной функции `filter()`.

Приведенный ниже код при условии, что функция `filter()` определена как указано выше:

```python
def is_odd(num):
    return num % 2


def is_word_long(word):
    return len(word) > 6


numbers = list(range(15))
words = ['В', 'новом', 'списке', 'останутся', 'только', 'длинные', 'слова']

odd_numbers = filter(is_odd, numbers)
large_words = filter(is_word_long, words)

print(odd_numbers)
print(large_words)
```

выводит:

```
[1, 3, 5, 7, 9, 11, 13]
['останутся', 'длинные']
```

Встроенная функция filter()

Встроенная функция `filter()` имеет сигнатуру `filter(func, iterable)`. В отличие от нашей реализации из прошлого урока она может принимать любой итерируемый объект (список, строку, кортеж, и т.д.).

В качестве параметра `func` указывается ссылка на функцию, которой будет передаваться текущий элемент последовательности. Внутри функции `func` необходимо вернуть значение `True` или `False`. Для примера, удалим все отрицательные значения из списка.

Приведенный ниже код:

```python
def func(elem):
    return elem >= 0


numbers = [-1, 2, -3, 4, 0, -20, 10]
positive_numbers = list(filter(func, numbers))  #  преобразуем итератор в список

print(positive_numbers)
```

выводит:

```no-highlight
[2, 4, 0, 10]
```

Обратите внимание: функция `filter()` как и функция `map()` возвращает не список, а специальный объект, который называется итератором. Итераторы можно перебрать с помощью цикла `for`, либо преобразовать в список.

Встроенной функции `filter()` можно в качестве первого параметра `func` передать значение `None`. В таком случае каждый элемент последовательности будет проверен на соответствие значению `True`. Если элемент в логическом контексте возвращает значение `False`, то он не будет добавлен в возвращаемый результат.



Приведенный ниже код:

```python
true_values = filter(None, [1, 0, 10, '', None, [], [1, 2, 3], ()])

for value in true_values:
    print(value)
```

выводит:

```no-highlight
1
10
[1, 2, 3]
```

В данном случае, значения списка: `0, '', None, [], ()` позиционируется как `False`, а значения `1, 10, [1, 2, 3]` как `True`.