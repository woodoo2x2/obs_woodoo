## [[Множества в математике|Множества]] в Python

В прошлых уроках мы изучили три типа коллекций в Python:

- списки – изменяемые коллекции элементов;
- строки – неизменяемые коллекции символов;
- кортежи – неизменяемые коллекции элементов.

Следующий тип коллекций (наборов данных) – **множество**.

Множество – структура данных, организованная так же, как математические множества.

Важно знать:

- все элементы множества различны (уникальны), два элемента не могут иметь одинаковое значение;
- множества неупорядочены, то есть элементы не хранятся в каком-то определенном порядке;
- элементы множества должны относиться к неизменяемым типам данных;
- хранящиеся в множестве элементы могут иметь разные типы данных.

Структура данных (data structure) — программная единица, позволяющая **хранить и обрабатывать** множество однотипных и/или логически связанных данных.

### Создание множества

Чтобы создать множество, нужно перечислить его элементы через запятую в фигурных скобках:

```python
numbers = {2, 4, 6, 8, 10}
languages = {"Python", "C#", "C++", "Java"}
```

Множество `numbers` состоит из 55 элементов, и каждый из них — **целое число**.

Множество `languages` состоит из 44 элементов, каждый из которых — **строка****.**

Множества могут содержать значения **разных типов данных**:

```python
info = {'Timur', 1992, 61.5}
```

Множество `info` содержит строковое значение, целое число и число с плавающей точкой.

  Не создавайте переменные с именем `set`. Это очень плохая практика.

### Пустое множество

Создать пустое множество можно с помощью встроенной функции, которая называется `set()`:

```python
myset = set()  # пустое множество
```

Обратите внимание — создать пустое множество с помощью пустых фигурных скобок нельзя:

```python
myset = {}  # создается словарь
```

С помощью пустых фигурных скобок создаются словари: так сложилось исторически. Дело в том, что словари появились в Python раньше, чем множества.

 Пустое множество создаётся исключительно через `set()`.

### Вывод множества

Для вывода всего множества можно использовать функцию `print()`:

```python
numbers = {2, 4, 6, 8, 10}
languages = {"Python", "C#", "C++", "Java"}
mammals = {"cat", "dog", "fox", "elephant"}

print(numbers)
print(languages)
print(mammals)
```

Функция `print()` выводит на экран элементы множества в фигурных скобках, разделенные запятыми:

```python
{2, 4, 6, 8, 10}
{"C#", "Python", "Java", "C++"}
{"dog", "cat", "fox", "elephant"}
```

Обратите внимание: при выводе множества порядок элементов может отличаться от существовавшего при его создании, поскольку множества — неупорядоченные коллекции данных.

### Встроенная функция set()

Встроенная функция [[Функция set()|set()]] помимо создания пустого множества может преобразовывать некоторые типы объектов в множества.

В функцию `set()` можно передать один аргумент. Передаваемый аргумент должен быть итерируемым объектом, таким как список, кортеж или строковое значение. Отдельные элементы объекта, передаваемого в качестве аргумента, становятся элементами множества:

```python
myset1 = set(range(10))          # множество из элементов последовательности
myset2 = set([1, 2, 3, 4, 5])    # множество из элементов списка
myset3 = set('abcd')             # множество из элементов строки
myset4 = set((10, 20, 30, 40))   # множество из элементов кортежа
```

Пустое множество также можно создать передав функции `set()` в качестве аргумента пустой список, строку или кортеж:

```python
emptyset1 = set([])  # пустое множество из пустого списка
emptyset2 = set('')  # пустое множество из пустой строки
emptyset3 = set(())  # пустое множество из пустого кортежа
```



### Функция len()

**Длиной множества** называется количество его элементов. Чтобы посчитать длину множества, используют встроенную функцию `len()` (от слова length – длина).

Следующий программный код:

```python
myset1 = {2, 2, 4, 6, 6}
myset2 = set([1, 2, 2, 3, 3, 4, 4, 5, 5])
myset3 = set('aaaaabbbbccccddd')

print(len(myset1))
print(len(myset2))
print(len(myset3))
```

выведет:

```no-highlight
3
5
4
```

### Оператор принадлежности in

Оператор `in` позволяет проверить, содержит ли множество некоторый элемент.

Рассмотрим следующий код:

```python
numbers = {2, 4, 6, 8, 10}

if 2 in numbers:
    print('Множество numbers содержит число 2')
else:
    print('Множество numbers не содержит число 2')
```

Такой код проверяет, содержит ли множество `numbers` число 22 и выводит соответствующий текст:

```no-highlight
Множество numbers содержит число 2
```

Мы можем использовать оператор `in` вместе с логическим оператором `not`. Например

```python
numbers = {2, 4, 6, 8, 10}

if 0 not in numbers:
    print('Множество numbers не содержит нулей')
```

Оператор принадлежности `in` работает **очень быстро** на множествах – намного быстрее, чем на списках. Поэтому если требуется часто осуществлять поиск в коллекции уникальных данных, то множество – подходящий выбор.

### Встроенные функции sum(), min(), max()

Встроенная функция `sum()` принимает в качестве аргумента множество чисел и вычисляет сумму его элементов.

Следующий программный код:

```python
numbers = {2, 2, 4, 6, 6}
print('Сумма всех элементов множества =', sum(numbers))
```

выводит:

```no-highlight
Сумма всех элементов множества = 12
```

Встроенные функции `min()` и `max()` принимают в качестве аргумента множество и находят минимальный и максимальный элементы соответственно.

Следующий программный код:

```python
numbers = {2, 2, 4, 6, 6}
print('Минимальный элемент =', min(numbers))
print('Максимальный элемент =', max(numbers))
```

выводит:

```no-highlight
Минимальный элемент = 2
Максимальный элемент = 6
```



Индексация и срезы **недоступны** для множеств.
Операция конкатенации `+` и умножения на число `*` **недоступны** для множеств.
 Элементы множества могут принадлежать любому **неизменяемому типу данных**: быть числами, строками, кортежами и т.д. Элементы изменяемых типов данных не могут входить в множества, в частности, нельзя сделать элементом множества [[list (Списки)]] или другое множество. Требование неизменяемости элементов множества накладывается особенностями представления множеств в Python.

Приведенный ниже код:

```python
myset1 = {1, 2, [5, 6], 7}  # множество не может содержать список
myset2 = {1, 2, {5, 6}, 7}  # множество не может содержать множество
```

приводит к ошибке:

```python
TypeError: unhashable type: 'list'
TypeError: unhashable type: 'set'
```

Однако приведенный ниже код:

```python
myset = {1, 2, (5, 6), 7}  # множество может содержать кортеж
```

работает, как полагается.
### Операции над множествами

Все основные операции над множествами выполняются двумя способами: при помощи метода или соответствующего ему оператора. Различие заключается в том, что метод может принимать в качестве аргумента не только множество (тип данных `set`), но и любой итерируемый объект (список, строку, кортеж..).

Приведенный ниже код:

```python
mylist = [2021, 2020, 2019, 2018, 2017, 2016]
mytuple = (2021, 2020, 2016)
mystr = 'abcd'

myset = {2009, 2010, 2016}

print(myset.union(mystr))                      # объединяем со строкой
print(myset.intersection(mylist))              # пересекаем со списком
print(myset.difference(mytuple))               # находим разность с кортежем
```

выводит (порядок элементов может отличаться):

```no-highlight
{2016, 'c', 'b', 'a', 'd', 2009, 2010}
{2016}
{2009, 2010}
```

Приведенный ниже код:

```python
mylist = [2021, 2020, 2019, 2018, 2017, 2016]
mytuple = (2021, 2020, 2016)
mystr = 'abcd'

myset = {2009, 2010, 2016}

print(myset | mystr)
print(myset & mylist)
print(myset - mytuple)
```

приводит к возникновению ошибок:

```no-highlight
TypeError: unsupported operand type(s) for |: 'set' and 'str'
TypeError: unsupported operand type(s) for &: 'set' and 'list'
TypeError: unsupported operand type(s) for -: 'set' and 'tuple'
```